<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animal Farm Historical Context Index</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Set default font to Inter, as required */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb;
            margin: 0;
            padding: 0;
        }
        /* Style for the navigation bar */
        .nav-bar {
            background-color: #333; /* Dark background */
            padding: 0.75rem 0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2);
            position: sticky;
            top: 0;
            z-index: 20;
        }
        /* Style for active link */
        .nav-link.active {
            background-color: #ef4444; /* Red for active state */
            color: white;
            font-weight: 700;
        }
        /* Style for the iframe container */
        .iframe-container {
            /* Calculate height: 100vh - (header height + nav bar height + some spacing) */
            height: calc(100vh - 8rem);
            padding: 1rem;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>

    <!-- Main Title Header -->
    <header class="bg-gray-800 text-white p-4">
        <h1 class="text-xl md:text-2xl font-extrabold tracking-wider max-w-7xl mx-auto">
            Animal Farm Context: Chapter Navigator
        </h1>
    </header>

    <!-- Navigation Bar (Chapter Links) -->
    <nav class="nav-bar">
        <div class="max-w-7xl mx-auto flex flex-wrap justify-center gap-2">
            <!-- Links are generated by the script below -->
        </div>
    </nav>

    <!-- Iframe Container to display chapter content -->
    <!-- It initially loads chapter1.html -->
    <div class="iframe-container max-w-7xl mx-auto">
        <iframe id="chapter-iframe" src="chapter1.html" title="Animal Farm Chapter Content"></iframe>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const navBar = document.querySelector('.nav-bar > div');
            const iframe = document.getElementById('chapter-iframe');
            const totalChapters = 10;
            let activeChapter = 1;

            // Function to create chapter links
            for (let i = 1; i <= totalChapters; i++) {
                const link = document.createElement('a');
                link.href = `#chapter${i}`;
                link.textContent = `Chapter ${i}`;
                link.className = `nav-link px-3 py-1 rounded-full text-white text-sm hover:bg-red-600 transition duration-150 ease-in-out cursor-pointer`;
                link.dataset.chapter = i;

                // Initial active state for Chapter 1
                if (i === activeChapter) {
                    link.classList.add('active');
                }

                link.addEventListener('click', (event) => {
                    event.preventDefault();
                    const chapterNum = parseInt(event.target.dataset.chapter);
                    
                    // 1. Update the iframe source
                    iframe.src = `chapter${chapterNum}.html`;
                    
                    // 2. Update active link styling
                    document.querySelectorAll('.nav-link').forEach(l => {
                        l.classList.remove('active');
                    });
                    event.target.classList.add('active');
                    
                    activeChapter = chapterNum;
                    
                    // 3. (Optional) Update URL hash for sharing/bookmarking
                    history.pushState(null, '', `#chapter${chapterNum}`);
                });

                navBar.appendChild(link);
            }
            
            // Check URL hash on load to load the correct chapter (e.g., if a user shared index.html#chapter3)
            const hash = window.location.hash;
            if (hash) {
                const match = hash.match(/#chapter(\d+)/);
                if (match) {
                    const chapterNum = parseInt(match[1]);
                    if (chapterNum >= 1 && chapterNum <= totalChapters) {
                        iframe.src = `chapter${chapterNum}.html`;
                        document.querySelectorAll('.nav-link').forEach(l => {
                            l.classList.remove('active');
                            if (parseInt(l.dataset.chapter) === chapterNum) {
                                l.classList.add('active');
                            }
                        });
                        activeChapter = chapterNum;
                    }
                }
            }
        });
    </script>

</body>
</html>
